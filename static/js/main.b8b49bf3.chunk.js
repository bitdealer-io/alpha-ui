(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,a){e.exports=a(57)},50:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=(a(50),a(18)),s=a(35),l=a(36),m=a(43),u=a(37),h=a(44),d=a(60),g=a(61),p=a(59),f=a(62),E=function(e){var t=e.initialPosition,a=e.markers;return r.a.createElement(d.a,{style:{height:"100vh"},center:t,zoom:14},r.a.createElement(g.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map(function(e,t){return r.a.createElement(p.a,{key:t,position:[e.location.latitude,e.location.longitude]},r.a.createElement(f.a,null,e.telegramUser," - \u20ac",e.sellMinAmountEur))}))},v=function(e){var t=e.onTextChange,a=e.onSelect,n=e.selectedValue,c=e.selectedLocation,o=e.suggestions,s=Object(i.a)(c,2),l=s[0],m=s[1];return r.a.createElement("div",{className:"card"},r.a.createElement("header",{className:"card-header"},r.a.createElement("p",{className:"card-header-title"},"Search")),r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input is-large",placeholder:"Enter a city or GPS location (comma separated)",type:"text",onChange:t}),r.a.createElement("span",{className:"icon is-medium is-left"},r.a.createElement("i",{className:"fa fa-search"})),r.a.createElement("span",{className:"icon is-medium is-right"},r.a.createElement("i",{className:"fa fa-arrow-right"}))),r.a.createElement("div",{className:"buttons"},o.map(function(e,t){var n=e.lat,c=e.lon,o=e.display_name;return r.a.createElement("span",{key:t,onClick:function(){return a([n,c],o)},className:"button is-link"},o)}))),r.a.createElement("footer",{className:"card-footer"},r.a.createElement("span",{className:"card-footer-item"},r.a.createElement("p",{className:"title is-6"},n)),r.a.createElement("span",{className:"card-footer-item"},r.a.createElement("p",{className:"subtitle is-6"},l,",",m))))},N=(a(55),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).initialLocation=[44.69,10.63],a.initialValue="Reggio nell'Emilia, RE, Emilia-Romagna, Italy",a.state={currentLocation:a.initialLocation,markers:[],searchValue:a.initialValue,searchSuggestions:[],isLoading:!0},a.smartSuggest=function(e){return fetch("https://nominatim.openstreetmap.org/search/".concat(e,"?format=json&limit=3")).then(function(e){return e.json()}).then(function(e){return a.setState({searchSuggestions:e})})},a.fetchSellOrders=function(e,t){return fetch('https://bitdealer-server.herokuapp.com/order/sell?location={"lat":'.concat(e,',"lon":').concat(t,"}")).then(function(e){return e.json()}).then(function(e){return a.setState({markers:e,isLoading:!1})}).catch(console.error)},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(this.state.currentLocation,2),t=e[0],a=e[1];this.fetchSellOrders(t,a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.markers,c=t.currentLocation,o=t.searchValue,s=t.searchSuggestions;return a?r.a.createElement("div",{className:"box"},"Loading..."):r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"BITDEALER.IO"),r.a.createElement(v,{suggestions:s,selectedValue:o,selectedLocation:c,onSelect:function(t,a){var n=Object(i.a)(t,2),r=n[0],c=n[1];e.fetchSellOrders(r,c),e.setState({searchSuggestions:[],searchValue:a,currentLocation:t})},onTextChange:function(t){return e.smartSuggest(t.target.value)}}),r.a.createElement(E,{initialPosition:c,markers:n}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[45,2,1]]]);
//# sourceMappingURL=main.b8b49bf3.chunk.js.map